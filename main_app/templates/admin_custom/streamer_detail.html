{% extends "admin/base_site.html" %}
{% load i18n %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<h1>Profil Streamer : {{ streamer.twitch_name }}</h1>
<hr>

<div style="display:flex; gap:2rem;">
  <div>
    <p><strong>Présence Mode :</strong> {{ streamer.get_presence_mode_display }}</p>
    <p><strong>Discord :</strong> {{ streamer.discord }}</p>
    <p><strong>Validé ?</strong> {{ streamer.validated_by_admin|yesno:"Oui,Non" }}</p>
    <p><strong>Description :</strong><br> {{ streamer.description|linebreaks }}</p>
    <p><strong>Date d'inscription :</strong> {{ streamer.created_at }}</p>
  </div>
  <div>
    <p><strong>Image :</strong><br> {{ streamer.profile_image_tag|safe }}</p>
    <p><strong>Broadcaster Type :</strong> {{ streamer.broadcaster_type }}</p>
    <p><strong>Followers :</strong> {{ streamer.follower_count }}</p>
    <p><strong>Email :</strong> {{ streamer.email }}</p>
  </div>
</div>

<hr>
<h3>Réseaux Sociaux</h3>
<ul>
{% for social in streamer.social_accounts.all %}
  <li>{{ social.get_network_display }} : 
      {{ social.username }} 
      {% if social.url %}
        (<a href="{{ social.url }}" target="_blank">voir</a>)
      {% endif %}
  </li>
{% empty %}
  <li>Aucun réseau social</li>
{% endfor %}
</ul>

<hr>
<!-- Boutons -->
<a href="{% url admin_site.name|add:':'|add:opts.app_label|add:'_'|add:opts.model_name|add:'_changelist' %}"
   class="btn btn-secondary">
   Retour à la liste
</a>

<a href="{% url admin_site.name|add:':'|add:opts.app_label|add:'_'|add:opts.model_name|add:'_change' streamer.pk %}"
   class="btn btn-primary">
   Modifier
</a>

<!-- Bouton Valider / Annuler -->
{% if streamer.validated_by_admin %}
  <a href="{% url 'myadmin:streamer_validate_toggle' streamer.pk %}" class="btn btn-warning">
    Annuler inscription
  </a>
{% else %}
  <a href="{% url 'myadmin:streamer_validate_toggle' streamer.pk %}" class="btn btn-success">
    Valider inscription
  </a>
{% endif %}

{% endblock %}
